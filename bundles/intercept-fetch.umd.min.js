!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["intercept-fetch"]=e():t["intercept-fetch"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=2)}([function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o=function(){function t(t){this.interceptors=r({},t)}return t.prototype.set=function(t,e){this.interceptors[t]=e},t.prototype.get=function(t){return this.has(t)?this.interceptors[t]:null},t.prototype.delete=function(t){this.has(t)&&delete this.interceptors[t]},t.prototype.has=function(t){return this.interceptors.hasOwnProperty(t)},t.prototype.forEach=function(t,e){for(var n in this.interceptors)this.interceptors.hasOwnProperty(n)&&t.call(e,this.interceptors[n],n,this)},t.prototype.merge=function(e){var n=this;return e instanceof t&&e.forEach(function(t,e){n.has(e)||n.set(e,t)}),this},t}()},function(t,e,n){"use strict";function r(t,e){for(var n in e)e.hasOwnProperty(n)&&!o(e[n])&&(t+=-1===t.indexOf("?")?"?":"&",t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]).replace(/%2C/g,","));return t}function o(t){return void 0===t||null===t}function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return s(this,void 0,void 0,function(){function n(){return s(this,void 0,void 0,function(){var e;return u(this,function(o){switch(o.label){case 0:return a<c?r?[4,t[a].apply(t,i)]:[3,2]:[3,5];case 1:return e=o.sent(),[3,4];case 2:return[4,t[a](i)];case 3:e=o.sent(),o.label=4;case 4:return i=e,a++,[2,n()];case 5:return[2,i]}})})}var r,o,i,c,a;return u(this,function(s){switch(s.label){case 0:return r=!1,o=e.length,2===o?(r=!0,i=e):i=e[0],c=t.length,a=0,[4,n()];case 1:return i=s.sent(),[2,i]}})})}e.a=r,e.b=i;var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(t){n=[6,t],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,u,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);n.d(e,"FetchClient",function(){return r.a});var o=n(0);n.d(e,"Interceptor",function(){return o.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(0),o=n(4),i=n(1),s=n(5),u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(t){n=[6,t],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,u,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},f={},l=["request","requestError","response","success","error","timeout","jsonpRequest","jsonpError","jsonpResponse","jsonpSuccess"],p=function(){function t(){if(this.timeout=1e4,"function"!=typeof fetch)throw new Error("FetchClient based on fetch api!!");this.clearInterceptors()}return t.prototype.setTimeout=function(t){this.timeout=t},t.prototype.clearInterceptors=function(){this.interceptors=null,l.forEach(function(t){f[t]=[]})},t.prototype.getInterceptors=function(){return this.interceptors},t.prototype.setInterceptors=function(t){if(!(t instanceof r.a))throw new Error("Error interceptors!!");this.clearInterceptors(),this.interceptors=t;var e=[];this.interceptors.forEach(function(t){if(null!=t.id&&t.id<0)throw new Error("Interceptor's id is must >= 0!!");e.push(t)}),e.sort(function(t,e){return null==t.id&&(t.id=-999),null==e.id&&(e.id=-999),e.id-t.id}).reverse(),e.forEach(function(t){l.forEach(function(e){t[e]&&f[e].push(t[e])})})},t.prototype.request=function(t,e){return c(this,void 0,void 0,function(){var n,r,o,s,l,p,h,b,d,y,v,w=this;return a(this,function(m){switch(m.label){case 0:if(r=u({},e),"string"==typeof t)n=t;else{if(!(t instanceof Request))throw new Error("First argument must be a url string or Request instance.");n=t.clone()}return[4,Object(i.b)(f.request,n,r)];case 1:if(o=m.sent(),n=o[0],r=o[1],"string"==typeof n)s=new Request(n,r);else{if(!(n instanceof Request))throw new Error("First argument must be a url string or Request instance.");s=n}return h=!1,b=!1,d=function(){return new Promise(function(t,e){setTimeout(function(){return c(w,void 0,void 0,function(){var t;return a(this,function(r){switch(r.label){case 0:if(b)return[3,5];h=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Object(i.b)(f.timeout,n)];case 2:return p=r.sent(),[3,4];case 3:return t=r.sent(),p=t,[3,4];case 4:e(p),r.label=5;case 5:return[2]}})})},w.timeout)})},y=function(){return c(w,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),[4,fetch(s)];case 1:return l=e.sent(),b=!0,[2,l];case 2:return t=e.sent(),b=!0,h?[3,4]:[4,Object(i.b)(f.requestError,t)];case 3:return p=e.sent(),[2,Promise.reject(p)];case 4:return[3,5];case 5:return[2]}})})},[4,Promise.race([d(),y()])];case 2:return l=m.sent(),[4,Object(i.b)(f.response,l)];case 3:return l=m.sent(),l.ok?[4,l.json()]:[3,6];case 4:return v=m.sent(),[4,Object(i.b)(f.success,v)];case 5:return v=m.sent(),[2,v];case 6:return[4,Object(i.b)(f.error,l)];case 7:return l=m.sent(),[4,l.json()];case 8:return p=m.sent(),[2,Promise.reject(p)]}})})},t.prototype.get=function(t,e,n){return e&&(t=Object(i.a)(t,e)),this.request(t,u({},n,{method:o.a.Get}))},t.prototype.post=function(t,e){return this.request(t,u({},e,{method:o.a.Post}))},t.prototype.put=function(t,e){return this.request(t,u({},e,{method:o.a.Put}))},t.prototype.delete=function(t,e){return this.request(t,u({},e,{method:o.a.Delete}))},t.prototype.options=function(t,e){return this.request(t,u({},e,{method:o.a.Options}))},t.prototype.head=function(t,e){return this.request(t,u({},e,{method:o.a.Head}))},t.prototype.patch=function(t,e){return this.request(t,u({},e,{method:o.a.Patch}))},t.prototype.jsonp=function(t,e,n){return e&&(t=Object(i.a)(t,e)),Object(s.a)(t,u({timeout:this.timeout},n),f)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={Get:"GET",Post:"POST",Put:"PUT",Delete:"DELETE",Options:"OPTIONS",Head:"HEAD",Patch:"PATCH"}},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n={}),c(this,void 0,void 0,function(){var r,o,c,f,l,p,h;return a(this,function(a){switch(a.label){case 0:return r=t,o=u({},e),[4,Object(s.b)(n.jsonpRequest,r,o)];case 1:l=a.sent(),r=l[0],o=l[1],a.label=2;case 2:return a.trys.push([2,4,,6]),[4,i()(r,o)];case 3:return c=a.sent(),[3,6];case 4:return p=a.sent(),[4,Object(s.b)(n.jsonpError,p)];case 5:return f=a.sent(),[2,Promise.reject(f)];case 6:return[4,Object(s.b)(n.jsonpResponse,c)];case 7:return c=a.sent(),c.ok?[4,c.json()]:[3,10];case 8:return h=a.sent(),[4,Object(s.b)(n.jsonpSuccess,h)];case 9:return h=a.sent(),[2,h];case 10:return[4,Object(s.b)(n.jsonpError,c)];case 11:return f=a.sent(),[2,Promise.reject(f)]}})})}e.a=r;var o=n(6),i=n.n(o),s=n(1),u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(t){n=[6,t],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,u,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}},function(t,e,n){var r,o,i;!function(n,s){o=[e,t],r=s,void 0!==(i="function"==typeof r?r.apply(e,o):r)&&(t.exports=i)}(0,function(t,e){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,u=e.timeout||s.timeout,c=e.jsonpCallback||s.jsonpCallback,a=void 0;return new Promise(function(s,f){var l=e.jsonpCallbackFunction||n(),p=c+"_"+l;window[l]=function(t){s({ok:!0,json:function(){return Promise.resolve(t)}}),a&&clearTimeout(a),o(p),r(l)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+c+"="+l),e.charset&&h.setAttribute("charset",e.charset),h.id=p,document.getElementsByTagName("head")[0].appendChild(h),a=setTimeout(function(){f(new Error("JSONP request to "+t+" timed out")),r(l),o(p),window[l]=function(){r(l)}},u),h.onerror=function(){f(new Error("JSONP request to "+t+" failed")),r(l),o(p),a&&clearTimeout(a)}})}var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};e.exports=i})}])});